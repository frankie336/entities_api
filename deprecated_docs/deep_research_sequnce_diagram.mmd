sequenceDiagram
    autonumber
    participant Manager as ≡ƒºá Manager Agent
    participant Scratchpad as ≡ƒô¥ Scratchpad
    participant System as ≡ƒÜá System/Tools
    participant Delegate as ≡ƒæÀ Delegate Worker
    participant Web as ≡ƒîÉ Live Web

    Note over Manager, Scratchpad: Phase 1: Planning & Initial Attempts

    Manager->>Scratchpad: update_scratchpad(Plan: Compare NVIDIA vs AMD Q1 2026)
    Manager->>Delegate: delegate_research_task("Find NVIDIA Q1 2026 guidance")
    Delegate-->>Manager: "No results found" (Task Failed)

    Note over Manager, System: Phase 2: The Schema Error Loop (Hallucination)

    Manager->>System: search_web_page(query="NVIDIA Q1 2026 earnings...")
    Note right of Manager: MISTAKE: Agent tries to use 'Ctrl+F' tool<br/>as a search engine (missing URL).
    System-->>Manager: ❌ SCHEMA ERROR: Missing argument 'url'

    Manager->>Delegate: delegate_research_task("Find NVIDIA Q1 2026 guidance")
    Delegate-->>Manager: "No results found"

    Manager->>System: search_web_page(query="AMD Q1 2026 earnings...")
    System-->>Manager: ❌ SCHEMA ERROR: Missing argument 'url'

    Manager->>Delegate: delegate_research_task("Find AMD Q1 2026 guidance")
    Delegate-->>Manager: "No results found"

    Note over Manager, Delegate: Phase 3: The Pivot (Successful Search)

    Manager->>Scratchpad: append_scratchpad(Note: No official guidance found)
    Manager->>Delegate: delegate_research_task("Find Analyst Estimates/Wall St Reports")

    activate Delegate
    Delegate->>Web: perform_web_search(...)
    Web-->>Delegate: Returns 10 Results (NVIDIA IR, CNBC, S&P)
    Delegate-->>Manager: ✅ SUCCESS: Returns SERP List including "Revenue $44.1B"
    deactivate Delegate

    Note over Manager, Web: Phase 4: Direct Verification

    Manager->>Web: read_web_page(NVIDIA Investor Relations)
    Manager->>Web: read_web_page(CNBC Article)
    Web-->>Manager: Return Page 0 Content

    Manager->>Web: web_scroll(NVIDIA IR, Page 1)
    Manager->>Web: web_scroll(CNBC, Page 1)
    Web-->>Manager: Return Page 1 Content

    Manager->>Scratchpad: append_scratchpad(Fact: NVIDIA Actual Revenue $44.1B)

    Note over Manager, Delegate: Phase 5: Final Dead End (AMD)

    Manager->>Delegate: delegate_research_task("Find AMD actual Q1 2026 revenue")
    Delegate-->>Manager: "No results found"

    Manager->>System: search_web_page(query="AMD Q1 2026...")
    System-->>Manager: ❌ SCHEMA ERROR: Missing argument 'url'

    Manager->>Delegate: delegate_research_task("Find AMD actuals")
    Delegate-->>Manager: "No results found"

    Manager->>Scratchpad: append_scratchpad(Conclusion: AMD data unavailable)
    Manager->>System: Final Answer (Synthesis)